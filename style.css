/* =========================================================
   style.css — Minimal Grayscale (Recto) + Theme Day + Cork
   - Sin curvas (0 radius)
   - Botones: solo borde TOP + RIGHT
   - Modal split: índice izquierda + editor derecha
   - Themes por clase: body.theme-day / body.theme-cork
   ========================================================= */

/* ---------- BASE TOKENS (MINIMAL DEFAULT) ---------- */
:root{
  --bg: #0f1114;
  --bg2:#0b0d10;

  --panel:#14171b;
  --card:#121418;

  --text:#e7e9ee;
  --muted:#a6acb7;

  --line:#2a2f36;
  --line2:#20242a;

  --focus:#c9ced8;
  --shadow: 0 18px 40px rgba(0,0,0,.45);

  --topbarH: 58px;

  --pad: 14px;
  --pad2: 10px;
}

/* ---------- THEME: DAY ---------- */
body.theme-day{
  --bg:#f3f4f6;
  --bg2:#e9ebef;

  --panel:#ffffff;
  --card:#fafafa;

  --text:#14171b;
  --muted:#4b5563;

  --line:#d6d9de;
  --line2:#e4e7ec;

  --focus:#111827;
  --shadow: 0 10px 20px rgba(0,0,0,.10);
}

/* ---------- RESET (RECTO) ---------- */
*{ box-sizing:border-box; border-radius:0 !important; }
html,body{ height:100%; }
body{
  margin:0;
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  background: linear-gradient(180deg, var(--bg), var(--bg2));
  color: var(--text);
}

.hidden{ display:none !important; }
.muted{ color: var(--muted); }
.small{ font-size:.9rem; }
kbd{
  background: rgba(255,255,255,.04);
  border-top: 1px solid var(--line);
  border-right: 1px solid var(--line);
  padding: 2px 6px;
  font-size: .9em;
}

/* ---------- TOPBAR ---------- */
.topbar{
  height: var(--topbarH);
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap:12px;
  padding: 0 16px;
  border-bottom: 1px solid var(--line);
  background: rgba(15,17,20,.92);
  position: sticky;
  top: 0;
  z-index: 1000;
}
body.theme-day .topbar{
  background: rgba(255,255,255,.92);
}

.brand{
  display:flex;
  align-items:center;
  gap:10px;
  white-space:nowrap;
}
.brand .dot{
  width:10px; height:10px;
  background: currentColor;
  opacity:.55;
}
.auth{ display:flex; align-items:center; gap:10px; }

.userBadge{
  display:flex;
  align-items:center;
  gap:10px;
  padding: 6px 10px;
  border-top: 1px solid var(--line);
  border-right: 1px solid var(--line);
  background: rgba(255,255,255,.02);
}
.userBadge img{
  width:28px; height:28px;
  border-top: 1px solid var(--line);
  border-right: 1px solid var(--line);
}

/* ---------- BUTTONS (MINIMAL) ---------- */
.btn{
  cursor:pointer;
  background: transparent;
  color: var(--text);
  padding: 8px 10px;
  border: none;
  border-top: 1px solid var(--line);
  border-right: 1px solid var(--line);
  letter-spacing: .2px;
  transition: background .12s ease, border-color .12s ease, color .12s ease;
}
.btn:hover{
  background: rgba(255,255,255,.03);
  border-top-color: var(--focus);
  border-right-color: var(--focus);
}
.btn:active{ background: rgba(255,255,255,.05); }
.btn:disabled{
  opacity:.45;
  cursor:not-allowed;
}
.btn.danger{
  color: #e6c0c0;
  border-top-color: #6a3a3a;
  border-right-color: #6a3a3a;
}
body.theme-day .btn.danger{
  color:#7a1f1f;
  border-top-color:#7a1f1f;
  border-right-color:#7a1f1f;
}

/* ---------- INPUTS (TOP + RIGHT only) ---------- */
textarea, select, input[type="file"]{
  width:100%;
  margin-top:6px;
  background: transparent;
  color: var(--text);
  padding: 10px;
  outline:none;
  border: none;
  border-top: 1px solid var(--line);
  border-right: 1px solid var(--line);
}
textarea::placeholder{ color: color-mix(in srgb, var(--muted) 80%, transparent); }
textarea:focus, select:focus, input[type="file"]:focus{
  border-top-color: var(--focus);
  border-right-color: var(--focus);
}

/* ---------- MAIN LAYOUT ---------- */
.layout{
  display:grid;
  grid-template-columns: 320px 1fr;
  gap: 14px;
  padding: 14px;
  min-height: calc(100vh - var(--topbarH));
}
@media (max-width: 980px){
  .layout{ grid-template-columns: 1fr; }
}

.panel{
  background: var(--panel);
  border: 1px solid var(--line);
  box-shadow: var(--shadow);
  padding: var(--pad);
}
.panel h2{ margin: 0 0 12px 0; font-size:1.1rem; }

.card{
  background: var(--card);
  border: 1px solid var(--line2);
  padding: 12px;
  margin: 10px 0;
}
.card h3{ margin: 0 0 10px 0; font-size: .95rem; }
.card.danger{ border-color:#2d1f1f; }
.card.info{ border-color: var(--line); }

.row{
  display:flex;
  gap:10px;
  align-items:center;
  margin-top:10px;
}
.row > *{ flex:1; }
.row .btn{ flex:0 0 auto; }

/* ---------- BOARD ---------- */
.boardWrap{
  background: transparent;
  border: 1px solid var(--line);
  box-shadow: var(--shadow);
  overflow:hidden;
  position:relative;
}
.board{
  position:relative;
  width:100%;
  height: calc(100vh - (var(--topbarH) + 34px));
  background:
    linear-gradient(180deg, rgba(255,255,255,.02), rgba(255,255,255,0)),
    #0d0f12;
}
body.theme-day .board{
  background:
    linear-gradient(180deg, rgba(0,0,0,.02), rgba(0,0,0,0)),
    #ffffff;
}

.board::before{
  content:"";
  position:absolute; inset:0;
  background-image:
    linear-gradient(to right, rgba(255,255,255,.03) 1px, transparent 1px),
    linear-gradient(to bottom, rgba(255,255,255,.03) 1px, transparent 1px);
  background-size: 36px 36px;
  opacity:.35;
  pointer-events:none;
}
body.theme-day .board::before{
  background-image:
    linear-gradient(to right, rgba(0,0,0,.06) 1px, transparent 1px),
    linear-gradient(to bottom, rgba(0,0,0,.06) 1px, transparent 1px);
  opacity:.18;
}

.boardHint{
  position:absolute;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  color: color-mix(in srgb, var(--muted) 90%, transparent);
  font-size:1rem;
  text-align:center;
  padding:20px;
  pointer-events:none;
}

/* Board items */
.item{
  position:absolute;
  user-select:none;
  cursor:grab;
  border: 1px solid rgba(255,255,255,.08);
  box-shadow: 0 16px 30px rgba(0,0,0,.35);
}
body.theme-day .item{
  border: 1px solid rgba(0,0,0,.10);
  box-shadow: 0 16px 30px rgba(0,0,0,.14);
}
.item:active{ cursor:grabbing; }
.item.selected{
  outline: 2px solid rgba(201,206,216,.55);
  outline-offset: 2px;
}

.note{
  width: 220px;
  min-height: 140px;
  padding: 12px 12px 18px 12px;
  transform: rotate(var(--rot));
}
.note .pin{
  position:absolute;
  top:8px; left:50%;
  width:10px; height:10px;
  transform: translateX(-50%);
  background: #9aa0aa;
}
.note .content{
  white-space:pre-wrap;
  font-size: 1rem;
  line-height: 1.25;
  color: #13161a;
}

/* Puedes neutralizarlos luego; por ahora los dejamos */
.note.yellow{background:#fff4a6}
.note.pink{background:#ffd0e3}
.note.blue{background:#bfe7ff}
.note.green{background:#c8ffd6}
.note.paper{background:#f2efe8}

.photo{
  width: 260px;
  height: 180px;
  overflow:hidden;
  background: #111;
  transform: rotate(var(--rot));
}
.photo img{ width:100%; height:100%; object-fit:cover; display:block; }
.photo .pin{
  position:absolute;
  top:8px; left:50%;
  width:12px; height:12px;
  transform: translateX(-50%);
  background: #9aa0aa;
}

/* Toast */
.toast{
  position: fixed;
  left: 50%;
  bottom: 16px;
  transform: translateX(-50%);
  background: rgba(10,12,15,.92);
  border-top: 1px solid var(--line);
  border-right: 1px solid var(--line);
  color: var(--text);
  padding: 10px 14px;
  z-index: 2000;
  box-shadow: var(--shadow);
}
body.theme-day .toast{
  background: rgba(255,255,255,.92);
  color: var(--text);
}

/* ---------- NOTEBOOK MODAL (ONLY ONE VERSION) ---------- */
.overlay{
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,.66);
  z-index: 3000;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 18px;
}
body.theme-day .overlay{
  background: rgba(20,24,30,.35);
}

.modal{
  width: min(1100px, 96vw);
  height: min(720px, 90vh);
  background: var(--panel);
  border: 1px solid var(--line);
  box-shadow: var(--shadow);
  display: flex;
  flex-direction: column;
  overflow: hidden;
}

.modalTop{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap: 10px;
  padding: 10px 12px;
  border-bottom: 1px solid var(--line);
  background: rgba(255,255,255,.02);
}
.modalTitle{
  display:flex;
  align-items:baseline;
  gap:10px;
  flex-wrap: wrap;
}
.modalActions{
  display:flex;
  gap:10px;
  align-items:center;
}

/* Split: index izquierda, editor derecha */
.modalBodySplit{
  flex:1;
  display:grid;
  grid-template-columns: 320px 1fr;
  min-height: 0;
}

/* Index Panel (izquierda) */
.indexPanel{
  border-right: 1px solid var(--line);
  background: rgba(255,255,255,.01);
  display:flex;
  flex-direction:column;
  min-height:0;
}
.indexHeader{
  padding: 12px;
  border-bottom: 1px solid var(--line);
}
.indexActions{
  display:flex;
  gap:8px;
  flex-wrap:wrap;
  margin-top:10px;
}

.indexSection{
  padding: 12px;
  border-bottom: 1px solid var(--line);
}
.indexLabel{
  letter-spacing: .12em;
  font-size: .72rem;
  text-transform: uppercase;
  margin-bottom: 10px;
}

/* Listas estilo índice */
.indexList{
  display:flex;
  flex-direction:column;
  gap:6px;
  overflow:auto;
  max-height: 220px;
  padding-right: 4px;
}

/* Cada item del índice: NO botones redondos */
.indexItem{
  padding: 10px;
  cursor: pointer;
  background: transparent;
  border: none;
  border-top: 1px solid var(--line);
  border-right: 1px solid var(--line);
  color: var(--text);
  display:flex;
  align-items:center;
  justify-content:space-between;
}
.indexItem:hover{
  background: rgba(255,255,255,.03);
  border-top-color: var(--focus);
  border-right-color: var(--focus);
}
.indexItem.active{
  background: rgba(255,255,255,.04);
  border-top-color: var(--focus);
  border-right-color: var(--focus);
}
.indexItem .name{
  flex:1;
  overflow:hidden;
  white-space:nowrap;
  text-overflow:ellipsis;
}

/* Footer dentro de sección de páginas */
.indexFooter{
  margin-top: 10px;
  display:flex;
  justify-content:flex-end;
}

/* Estado al fondo del panel */
.indexStatus{
  margin-top:auto;
  padding: 10px 12px;
  border-top: 1px solid var(--line);
  color: var(--muted);
}

/* Editor (derecha) */
.editorPanel{
  min-height:0;
  padding: 12px;
  background: transparent;
}
.pageEditor{
  width: 100%;
  height: 100%;
  resize: none;
  background: transparent;
  color: var(--text);
  padding: 14px;
  border: none;
  border-top: 1px solid var(--line);
  border-right: 1px solid var(--line);
  outline:none;
  line-height: 1.45;
  font-size: 1rem;
}
.pageEditor:focus{
  border-top-color: var(--focus);
  border-right-color: var(--focus);
}

/* Responsive modal */
@media (max-width: 980px){
  .board{ height: 60vh; }
  .modalBodySplit{ grid-template-columns: 1fr; }
  .indexPanel{ border-right:none; border-bottom:1px solid var(--line); }
  .editorPanel{ height: 48vh; }
}

/* =========================================================
   THEME: CORK (FUN) — activado por body.theme-cork
   ========================================================= */
body.theme-cork{
  --bg:#e7dfcf;
  --bg2:#d9d1c1;

  --panel:rgba(255,255,255,.88);
  --card:rgba(255,255,255,.80);

  --text:#1f2328;
  --muted:#4f5a66;

  --line:rgba(0,0,0,.18);
  --line2:rgba(0,0,0,.12);

  --focus:#1f2328;
  --shadow: 0 18px 40px rgba(0,0,0,.20);

  background:
    radial-gradient(1200px 700px at 20% 10%, rgba(0,0,0,.10), transparent 55%),
    radial-gradient(900px 600px at 90% 20%, rgba(0,0,0,.12), transparent 55%),
    linear-gradient(180deg, #c7c1b6, #a8a196);
}

/* topbar “madera” sin redondeos */
body.theme-cork .topbar{
  background: rgba(0,0,0,.12);
  border-bottom: 1px solid rgba(0,0,0,.20);
}

/* botones “plástico” PERO rectos (mantiene top/right) */
body.theme-cork .btn{
  background: rgba(255,255,255,.55);
  border-top: 1px solid rgba(0,0,0,.25);
  border-right: 1px solid rgba(0,0,0,.25);
  color: #121212;
}
body.theme-cork .btn:hover{ background: rgba(255,255,255,.78); }

/* board wrap como marco */
body.theme-cork .boardWrap{
  border: 1px solid rgba(0,0,0,.35);
  background: linear-gradient(180deg, rgba(255,255,255,.10), rgba(0,0,0,.10));
  padding: 12px;
}
body.theme-cork .board{
  border: 1px solid rgba(0,0,0,.30);
  background:
    radial-gradient(circle at 1px 1px, rgba(0,0,0,.07) 1px, transparent 0) 0 0 / 22px 22px,
    radial-gradient(900px 700px at 20% 20%, rgba(255,255,255,.12), transparent 55%),
    linear-gradient(180deg, rgba(0,0,0,.06), rgba(0,0,0,.10)),
    #caa26a;
}
body.theme-cork .board::before{ display:none; }

body.theme-cork .item{
  border: 1px solid rgba(0,0,0,.20);
  box-shadow: 0 18px 35px rgba(0,0,0,.25);
}
body.theme-cork .note .content{
  color: rgba(20,12,8,.88);
  font-weight: 600;
}

/* modal “papel” */
body.theme-cork .modal{
  background: rgba(245,242,236,.92);
  border: 1px solid rgba(0,0,0,.18);
  color: #1b1b1b;
}
body.theme-cork .pageEditor{
  background: rgba(255,255,255,.55);
  border-top: 1px solid rgba(0,0,0,.20);
  border-right: 1px solid rgba(0,0,0,.20);
  color: #111;
}
